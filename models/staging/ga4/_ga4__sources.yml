version: 2

sources:
  - name: ga4
    description: "Raw GA4 event data from the Google Merchandise Store (Obfuscated)"
    database: bigquery-public-data  
    schema: ga4_obfuscated_sample_ecommerce
    loader: "GA4 Export"
    tables:
      - name: events
        description: "Partitioned events table. Contains nested event_params."
        # This allows you to query the wildcard table (events_*) as one table
        identifier: "events_*"
        
        
        # Warn if data hasn't arrived in 24 hours (simulating a live pipeline)
        freshness:
          warn_after: {count: 24, period: hour}
          error_after: {count: 48, period: hour}
        loaded_at_field: "PARSE_TIMESTAMP('%Y%m%d', _TABLE_SUFFIX)"